spring.application.name=moeda

# =============================================
# JWT Configuration
# =============================================
api.security.token.secret=${JWT_SECRET:meu-segredo-super-secreto-change-in-production-12345678}
api.security.token.expiration=7200

# =============================================
# Database Configuration - MySQL
# =============================================
# Para desenvolvimento local, ajuste as credenciais abaixo
spring.datasource.url=jdbc:mysql://localhost:3306/moeda_estudantil?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=America/Sao_Paulo&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =============================================
# JPA / Hibernate Configuration
# =============================================
# Estratégia de atualização do schema
# - create: Apaga e recria as tabelas a cada inicialização (⚠️ CUIDADO: perde dados!)
# - update: Atualiza o schema sem perder dados (recomendado para desenvolvimento)
# - validate: Apenas valida o schema (produção)
# - none: Não faz nada
spring.jpa.hibernate.ddl-auto=update

# Dialeto específico do MySQL 8
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# Mostrar SQL no console (útil para debug)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Habilitar logging de bind parameters (valores dos parâmetros SQL)
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# =============================================
# SQL Initialization (schema.sql e data.sql)
# =============================================
# DESATIVADO: Execute os scripts manualmente no HeidiSQL
spring.sql.init.mode=never

# =============================================
# Server Configuration
# =============================================
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# =============================================
# DevTools Configuration
# =============================================
# Desabilitar restart remoto do DevTools
spring.devtools.remote.restart.enabled=false
spring.devtools.livereload.enabled=true

# =============================================
# Email Configuration (Mock - para produção configurar SMTP real)
# =============================================
# Para testes, o sistema usa logs ao invés de emails reais
# Para produção, configure SMTP:
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=seu-email@gmail.com
# spring.mail.password=sua-senha-app
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# =============================================
# Logging Configuration
# =============================================
logging.level.root=INFO
logging.level.com.puc.moeda=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG

# =============================================
# Jackson Configuration (JSON)
# =============================================
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Sao_Paulo

# =============================================
# SpringDoc OpenAPI Configuration (Swagger UI)
# =============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
